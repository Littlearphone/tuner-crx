import{b as x,d as F,D as mt,a4 as Oe,u as K,P as Ge,ab as Z,_ as W,S as Kt,ac as qt,V as zt,U as Ce,aH as he,C as Wt,Y as Xt,H as Yt,X as ye,$ as xt,a6 as Jt,aa as Gt,f as Ee,at as bt,E as q,ae as Zt,v as Ae,a3 as Be,ah as Qt,J as Ne,w as Ie,aI as ea,aJ as yt,ad as ta,aK as kt,L as Ue,m as De,g as Q,aL as aa,aM as oa,av as _t,R as na,aN as sa,aO as la,n as $t,aP as ra,T as ia,ap as Pe,ax as ue,am as Ze,au as ca,k as ua,l as da}from"./__uno.js";import{d as fa,c as pa}from"./pinia.js";import{E as ha,a as Ct}from"./slider.js";import{D as wt,s as va,g as ga,A as ma,H as ba}from"./support.js";import{a0 as me,c as L,r as N,D as ke,w as H,J as Le,d as D,o as b,b as w,j as S,n as k,u as l,x as U,i as ee,S as Qe,h as St,N as ya,F as He,y as je,A as Et,p as Pt,f as V,g as A,l as ve,k as T,z as M,q as et,s as z,m as Ve,H as ae,C as Lt,e as I,v as Ft,a as Tt,Y as B,a1 as tt,E as ka,Z as _a,$ as at,B as $a,V as de,K as Mt,M as Ca,a2 as wa,a3 as fe,T as Sa}from"./runtime-core.esm-bundler.js";import{b as Ea,E as ot,C as Pa,d as La,m as Fa}from"./button.js";const Ke=t=>{let e,o;return t.type==="touchend"?(o=t.changedTouches[0].clientY,e=t.changedTouches[0].clientX):t.type.startsWith("touch")?(o=t.touches[0].clientY,e=t.touches[0].clientX):(o=t.clientY,e=t.clientX),{clientX:e,clientY:o}};var Ta=1,Ma=4;function nt(t){return Ea(t,Ta|Ma)}const Aa=x({color:{type:F(Object),required:!0},vertical:{type:Boolean,default:!1}});let Te=!1;function be(t,e){if(!mt)return;const o=function(s){var r;(r=e.drag)==null||r.call(e,s)},a=function(s){var r;document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",a),document.onselectstart=null,document.ondragstart=null,Te=!1,(r=e.end)==null||r.call(e,s)},n=function(s){var r;Te||(s.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",o),document.addEventListener("mouseup",a),document.addEventListener("touchmove",o),document.addEventListener("touchend",a),Te=!0,(r=e.start)==null||r.call(e,s))};t.addEventListener("mousedown",n),t.addEventListener("touchstart",n,{passive:!1})}const Na=t=>{const e=Le(),{t:o}=Oe(),a=me(),n=me(),s=L(()=>t.color.get("alpha")),r=L(()=>o("el.colorpicker.alphaLabel"));function u(h){var g;h.target!==a.value&&f(h),(g=a.value)==null||g.focus()}function f(h){if(!n.value||!a.value)return;const i=e.vnode.el.getBoundingClientRect(),{clientX:p,clientY:c}=Ke(h);if(t.vertical){let m=c-i.top;m=Math.max(a.value.offsetHeight/2,m),m=Math.min(m,i.height-a.value.offsetHeight/2),t.color.set("alpha",Math.round((m-a.value.offsetHeight/2)/(i.height-a.value.offsetHeight)*100))}else{let m=p-i.left;m=Math.max(a.value.offsetWidth/2,m),m=Math.min(m,i.width-a.value.offsetWidth/2),t.color.set("alpha",Math.round((m-a.value.offsetWidth/2)/(i.width-a.value.offsetWidth)*100))}}function v(h){const{code:g,shiftKey:i}=h,p=i?10:1;switch(g){case Z.left:case Z.down:h.preventDefault(),h.stopPropagation(),_(-p);break;case Z.right:case Z.up:h.preventDefault(),h.stopPropagation(),_(p);break}}function _(h){let g=s.value+h;g=g<0?0:g>100?100:g,t.color.set("alpha",g)}return{thumb:a,bar:n,alpha:s,alphaLabel:r,handleDrag:f,handleClick:u,handleKeydown:v}},Da=(t,{bar:e,thumb:o,handleDrag:a})=>{const n=Le(),s=K("color-alpha-slider"),r=N(0),u=N(0),f=N();function v(){if(!o.value||t.vertical)return 0;const C=n.vnode.el,d=t.color.get("alpha");return C?Math.round(d*(C.offsetWidth-o.value.offsetWidth/2)/100):0}function _(){if(!o.value)return 0;const C=n.vnode.el;if(!t.vertical)return 0;const d=t.color.get("alpha");return C?Math.round(d*(C.offsetHeight-o.value.offsetHeight/2)/100):0}function h(){if(t.color&&t.color.value){const{r:C,g:d,b:P}=t.color.toRgb();return`linear-gradient(to right, rgba(${C}, ${d}, ${P}, 0) 0%, rgba(${C}, ${d}, ${P}, 1) 100%)`}return""}function g(){r.value=v(),u.value=_(),f.value=h()}ke(()=>{if(!e.value||!o.value)return;const C={drag:d=>{a(d)},end:d=>{a(d)}};be(e.value,C),be(o.value,C),g()}),H(()=>t.color.get("alpha"),()=>g()),H(()=>t.color.value,()=>g());const i=L(()=>[s.b(),s.is("vertical",t.vertical)]),p=L(()=>s.e("bar")),c=L(()=>s.e("thumb")),m=L(()=>({background:f.value})),y=L(()=>({left:Ge(r.value),top:Ge(u.value)}));return{rootKls:i,barKls:p,barStyle:m,thumbKls:c,thumbStyle:y,update:g}},Va="ElColorAlphaSlider",Ra=D({name:Va}),Oa=D({...Ra,props:Aa,setup(t,{expose:e}){const o=t,{alpha:a,alphaLabel:n,bar:s,thumb:r,handleDrag:u,handleClick:f,handleKeydown:v}=Na(o),{rootKls:_,barKls:h,barStyle:g,thumbKls:i,thumbStyle:p,update:c}=Da(o,{bar:s,thumb:r,handleDrag:u});return e({update:c,bar:s,thumb:r}),(m,y)=>(b(),w("div",{class:k(l(_))},[S("div",{ref_key:"bar",ref:s,class:k(l(h)),style:U(l(g)),onClick:l(f)},null,14,["onClick"]),S("div",{ref_key:"thumb",ref:r,class:k(l(i)),style:U(l(p)),"aria-label":l(n),"aria-valuenow":l(a),"aria-orientation":m.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:l(v)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var Ba=W(Oa,[["__file","alpha-slider.vue"]]);const Ia=D({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(t){const e=K("color-hue-slider"),o=Le(),a=N(),n=N(),s=N(0),r=N(0),u=L(()=>t.color.get("hue"));H(()=>u.value,()=>{g()});function f(i){i.target!==a.value&&v(i)}function v(i){if(!n.value||!a.value)return;const c=o.vnode.el.getBoundingClientRect(),{clientX:m,clientY:y}=Ke(i);let C;if(t.vertical){let d=y-c.top;d=Math.min(d,c.height-a.value.offsetHeight/2),d=Math.max(a.value.offsetHeight/2,d),C=Math.round((d-a.value.offsetHeight/2)/(c.height-a.value.offsetHeight)*360)}else{let d=m-c.left;d=Math.min(d,c.width-a.value.offsetWidth/2),d=Math.max(a.value.offsetWidth/2,d),C=Math.round((d-a.value.offsetWidth/2)/(c.width-a.value.offsetWidth)*360)}t.color.set("hue",C)}function _(){if(!a.value)return 0;const i=o.vnode.el;if(t.vertical)return 0;const p=t.color.get("hue");return i?Math.round(p*(i.offsetWidth-a.value.offsetWidth/2)/360):0}function h(){if(!a.value)return 0;const i=o.vnode.el;if(!t.vertical)return 0;const p=t.color.get("hue");return i?Math.round(p*(i.offsetHeight-a.value.offsetHeight/2)/360):0}function g(){s.value=_(),r.value=h()}return ke(()=>{if(!n.value||!a.value)return;const i={drag:p=>{v(p)},end:p=>{v(p)}};be(n.value,i),be(a.value,i),g()}),{bar:n,thumb:a,thumbLeft:s,thumbTop:r,hueValue:u,handleClick:f,update:g,ns:e}}});function Ua(t,e,o,a,n,s){return b(),w("div",{class:k([t.ns.b(),t.ns.is("vertical",t.vertical)])},[S("div",{ref:"bar",class:k(t.ns.e("bar")),onClick:t.handleClick},null,10,["onClick"]),S("div",{ref:"thumb",class:k(t.ns.e("thumb")),style:U({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}var Ha=W(Ia,[["render",Ua],["__file","hue-slider.vue"]]);const ja=x({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Kt,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:qt.teleported,predefine:{type:F(Array)},validateEvent:{type:Boolean,default:!0},...zt(["ariaLabel"])}),Ka={[Ce]:t=>ee(t)||he(t),[Wt]:t=>ee(t)||he(t),activeChange:t=>ee(t)||he(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent},At=Symbol("colorPickerContextKey"),st=function(t,e,o){return[t,e*o/((t=(2-e)*o)<1?t:2-t)||0,t/2]},qa=function(t){return typeof t=="string"&&t.includes(".")&&Number.parseFloat(t)===1},za=function(t){return typeof t=="string"&&t.includes("%")},oe=function(t,e){qa(t)&&(t="100%");const o=za(t);return t=Math.min(e,Math.max(0,Number.parseFloat(`${t}`))),o&&(t=Number.parseInt(`${t*e}`,10)/100),Math.abs(t-e)<1e-6?1:t%e/Number.parseFloat(e)},lt={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},we=t=>{t=Math.min(Math.round(t),255);const e=Math.floor(t/16),o=t%16;return`${lt[e]||e}${lt[o]||o}`},rt=function({r:t,g:e,b:o}){return Number.isNaN(+t)||Number.isNaN(+e)||Number.isNaN(+o)?"":`#${we(t)}${we(e)}${we(o)}`},Me={A:10,B:11,C:12,D:13,E:14,F:15},G=function(t){return t.length===2?(Me[t[0].toUpperCase()]||+t[0])*16+(Me[t[1].toUpperCase()]||+t[1]):Me[t[1].toUpperCase()]||+t[1]},Wa=function(t,e,o){e=e/100,o=o/100;let a=e;const n=Math.max(o,.01);o*=2,e*=o<=1?o:2-o,a*=n<=1?n:2-n;const s=(o+e)/2,r=o===0?2*a/(n+a):2*e/(o+e);return{h:t,s:r*100,v:s*100}},it=(t,e,o)=>{t=oe(t,255),e=oe(e,255),o=oe(o,255);const a=Math.max(t,e,o),n=Math.min(t,e,o);let s;const r=a,u=a-n,f=a===0?0:u/a;if(a===n)s=0;else{switch(a){case t:{s=(e-o)/u+(e<o?6:0);break}case e:{s=(o-t)/u+2;break}case o:{s=(t-e)/u+4;break}}s/=6}return{h:s*360,s:f*100,v:r*100}},pe=function(t,e,o){t=oe(t,360)*6,e=oe(e,100),o=oe(o,100);const a=Math.floor(t),n=t-a,s=o*(1-e),r=o*(1-n*e),u=o*(1-(1-n)*e),f=a%6,v=[o,r,s,s,u,o][f],_=[u,o,o,r,s,s][f],h=[s,s,u,o,o,r][f];return{r:Math.round(v*255),g:Math.round(_*255),b:Math.round(h*255)}};class ge{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const o in e)Qe(e,o)&&(this[o]=e[o]);e.value?this.fromString(e.value):this.doOnChange()}set(e,o){if(arguments.length===1&&typeof e=="object"){for(const a in e)Qe(e,a)&&this.set(a,e[a]);return}this[`_${e}`]=o,this.doOnChange()}get(e){return e==="alpha"?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return pe(this._hue,this._saturation,this._value)}fromString(e){if(!e){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const o=(a,n,s)=>{this._hue=Math.max(0,Math.min(360,a)),this._saturation=Math.max(0,Math.min(100,n)),this._value=Math.max(0,Math.min(100,s)),this.doOnChange()};if(e.includes("hsl")){const a=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,s)=>s>2?Number.parseFloat(n):Number.parseInt(n,10));if(a.length===4?this._alpha=Number.parseFloat(a[3])*100:a.length===3&&(this._alpha=100),a.length>=3){const{h:n,s,v:r}=Wa(a[0],a[1],a[2]);o(n,s,r)}}else if(e.includes("hsv")){const a=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,s)=>s>2?Number.parseFloat(n):Number.parseInt(n,10));a.length===4?this._alpha=Number.parseFloat(a[3])*100:a.length===3&&(this._alpha=100),a.length>=3&&o(a[0],a[1],a[2])}else if(e.includes("rgb")){const a=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,s)=>s>2?Number.parseFloat(n):Number.parseInt(n,10));if(a.length===4?this._alpha=Number.parseFloat(a[3])*100:a.length===3&&(this._alpha=100),a.length>=3){const{h:n,s,v:r}=it(a[0],a[1],a[2]);o(n,s,r)}}else if(e.includes("#")){const a=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(a))return;let n,s,r;a.length===3?(n=G(a[0]+a[0]),s=G(a[1]+a[1]),r=G(a[2]+a[2])):(a.length===6||a.length===8)&&(n=G(a.slice(0,2)),s=G(a.slice(2,4)),r=G(a.slice(4,6))),a.length===8?this._alpha=G(a.slice(6))/255*100:(a.length===3||a.length===6)&&(this._alpha=100);const{h:u,s:f,v}=it(n,s,r);o(u,f,v)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:o,_value:a,_alpha:n,format:s}=this;if(this.enableAlpha)switch(s){case"hsl":{const r=st(e,o/100,a/100);this.value=`hsla(${e}, ${Math.round(r[1]*100)}%, ${Math.round(r[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${e}, ${Math.round(o)}%, ${Math.round(a)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${rt(pe(e,o,a))}${we(n*255/100)}`;break}default:{const{r,g:u,b:f}=pe(e,o,a);this.value=`rgba(${r}, ${u}, ${f}, ${this.get("alpha")/100})`}}else switch(s){case"hsl":{const r=st(e,o/100,a/100);this.value=`hsl(${e}, ${Math.round(r[1]*100)}%, ${Math.round(r[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${e}, ${Math.round(o)}%, ${Math.round(a)}%)`;break}case"rgb":{const{r,g:u,b:f}=pe(e,o,a);this.value=`rgb(${r}, ${u}, ${f})`;break}default:this.value=rt(pe(e,o,a))}}}const Xa=D({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(t){const e=K("color-predefine"),{currentColor:o}=St(At),a=N(s(t.colors,t.color));H(()=>o.value,r=>{const u=new ge;u.fromString(r),a.value.forEach(f=>{f.selected=u.compare(f)})}),ya(()=>{a.value=s(t.colors,t.color)});function n(r){t.color.fromString(t.colors[r])}function s(r,u){return r.map(f=>{const v=new ge;return v.enableAlpha=t.enableAlpha,v.format="rgba",v.fromString(f),v.selected=v.value===u.value,v})}return{rgbaColors:a,handleSelect:n,ns:e}}});function Ya(t,e,o,a,n,s){return b(),w("div",{class:k(t.ns.b())},[S("div",{class:k(t.ns.e("colors"))},[(b(!0),w(He,null,je(t.rgbaColors,(r,u)=>(b(),w("div",{key:t.colors[u],class:k([t.ns.e("color-selector"),t.ns.is("alpha",r._alpha<100),{selected:r.selected}]),onClick:f=>t.handleSelect(u)},[S("div",{style:U({backgroundColor:r.value})},null,4)],10,["onClick"]))),128))],2)],2)}var xa=W(Xa,[["render",Ya],["__file","predefine.vue"]]);const Ja=D({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(t){const e=K("color-svpanel"),o=Le(),a=N(0),n=N(0),s=N("hsl(0, 100%, 50%)"),r=L(()=>{const v=t.color.get("hue"),_=t.color.get("value");return{hue:v,value:_}});function u(){const v=t.color.get("saturation"),_=t.color.get("value"),h=o.vnode.el,{clientWidth:g,clientHeight:i}=h;n.value=v*g/100,a.value=(100-_)*i/100,s.value=`hsl(${t.color.get("hue")}, 100%, 50%)`}function f(v){const h=o.vnode.el.getBoundingClientRect(),{clientX:g,clientY:i}=Ke(v);let p=g-h.left,c=i-h.top;p=Math.max(0,p),p=Math.min(p,h.width),c=Math.max(0,c),c=Math.min(c,h.height),n.value=p,a.value=c,t.color.set({saturation:p/h.width*100,value:100-c/h.height*100})}return H(()=>r.value,()=>{u()}),ke(()=>{be(o.vnode.el,{drag:v=>{f(v)},end:v=>{f(v)}}),u()}),{cursorTop:a,cursorLeft:n,background:s,colorValue:r,handleDrag:f,update:u,ns:e}}});function Ga(t,e,o,a,n,s){return b(),w("div",{class:k(t.ns.b()),style:U({backgroundColor:t.background})},[S("div",{class:k(t.ns.e("white"))},null,2),S("div",{class:k(t.ns.e("black"))},null,2),S("div",{class:k(t.ns.e("cursor")),style:U({top:t.cursorTop+"px",left:t.cursorLeft+"px"})},[S("div")],6)],6)}var Za=W(Ja,[["render",Ga],["__file","sv-panel.vue"]]);const Qa=D({name:"ElColorPicker"}),eo=D({...Qa,props:ja,emits:Ka,setup(t,{expose:e,emit:o}){const a=t,{t:n}=Oe(),s=K("color"),{formItem:r}=Xt(),u=Yt(),f=ye(),{inputId:v,isLabeledByFormItem:_}=xt(a,{formItemContext:r}),h=N(),g=N(),i=N(),p=N(),c=N(),m=N(),{isFocused:y,handleFocus:C,handleBlur:d}=Jt(c,{beforeFocus(){return f.value},beforeBlur($){var j;return(j=p.value)==null?void 0:j.isFocusInsideContent($)},afterBlur(){ie(!1),ce()}});let P=!0;const E=Et(new ge({enableAlpha:a.showAlpha,format:a.colorFormat||"",value:a.modelValue})),O=N(!1),R=N(!1),J=N(""),Fe=L(()=>!a.modelValue&&!R.value?"transparent":X(E,a.showAlpha)),ne=L(()=>!a.modelValue&&!R.value?"":E.value),se=L(()=>_.value?void 0:a.ariaLabel||n("el.colorpicker.defaultLabel")),le=L(()=>_.value?r==null?void 0:r.labelId:void 0),re=L(()=>[s.b("picker"),s.is("disabled",f.value),s.bm("picker",u.value),s.is("focused",y.value)]);function X($,j){if(!($ instanceof ge))throw new TypeError("color should be instance of _color Class");const{r:Y,g:xe,b:Je}=$.toRgb();return j?`rgba(${Y}, ${xe}, ${Je}, ${$.get("alpha")/100})`:`rgb(${Y}, ${xe}, ${Je})`}function ie($){O.value=$}const _e=Gt(ie,100,{leading:!0});function qe(){f.value||ie(!0)}function ze(){_e(!1),ce()}function ce(){ae(()=>{a.modelValue?E.fromString(a.modelValue):(E.value="",ae(()=>{R.value=!1}))})}function Ot(){f.value||_e(!O.value)}function We(){E.fromString(J.value)}function Bt(){const $=E.value;o(Ce,$),o("change",$),a.validateEvent&&(r==null||r.validate("change").catch(j=>Ne())),_e(!1),ae(()=>{const j=new ge({enableAlpha:a.showAlpha,format:a.colorFormat||"",value:a.modelValue});E.compare(j)||ce()})}function It(){_e(!1),o(Ce,null),o("change",null),a.modelValue!==null&&a.validateEvent&&(r==null||r.validate("change").catch($=>Ne())),ce()}function Ut(){O.value&&(ze(),y.value&&Ye())}function Xe($){$.preventDefault(),$.stopPropagation(),ie(!1),ce()}function Ht($){switch($.code){case Z.enter:case Z.space:$.preventDefault(),$.stopPropagation(),qe(),m.value.focus();break;case Z.esc:Xe($);break}}function Ye(){c.value.focus()}function jt(){c.value.blur()}return ke(()=>{a.modelValue&&(J.value=ne.value)}),H(()=>a.modelValue,$=>{$?$&&$!==E.value&&(P=!1,E.fromString($)):R.value=!1}),H(()=>[a.colorFormat,a.showAlpha],()=>{E.enableAlpha=a.showAlpha,E.format=a.colorFormat||E.format,E.doOnChange(),o(Ce,E.value)}),H(()=>ne.value,$=>{J.value=$,P&&o("activeChange",$),P=!0}),H(()=>E.value,()=>{!a.modelValue&&!R.value&&(R.value=!0)}),H(()=>O.value,()=>{ae(()=>{var $,j,Y;($=h.value)==null||$.update(),(j=g.value)==null||j.update(),(Y=i.value)==null||Y.update()})}),Pt(At,{currentColor:ne}),e({color:E,show:qe,hide:ze,focus:Ye,blur:jt}),($,j)=>(b(),V(l(Qt),{ref_key:"popper",ref:p,visible:O.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[l(s).be("picker","panel"),l(s).b("dropdown"),$.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:$.teleported,transition:`${l(s).namespace.value}-zoom-in-top`,persistent:"",onHide:Y=>ie(!1)},{content:A(()=>[ve((b(),w("div",{onKeydown:Ee(Xe,["esc"])},[S("div",{class:k(l(s).be("dropdown","main-wrapper"))},[T(Ha,{ref_key:"hue",ref:h,class:"hue-slider",color:l(E),vertical:""},null,8,["color"]),T(Za,{ref_key:"sv",ref:g,color:l(E)},null,8,["color"])],2),$.showAlpha?(b(),V(Ba,{key:0,ref_key:"alpha",ref:i,color:l(E)},null,8,["color"])):M("v-if",!0),$.predefine?(b(),V(xa,{key:1,ref:"predefine","enable-alpha":$.showAlpha,color:l(E),colors:$.predefine},null,8,["enable-alpha","color","colors"])):M("v-if",!0),S("div",{class:k(l(s).be("dropdown","btns"))},[S("span",{class:k(l(s).be("dropdown","value"))},[T(l(bt),{ref_key:"inputRef",ref:m,modelValue:J.value,"onUpdate:modelValue":Y=>J.value=Y,"validate-event":!1,size:"small",onKeyup:Ee(We,["enter"]),onBlur:We},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),T(l(ot),{class:k(l(s).be("dropdown","link-btn")),text:"",size:"small",onClick:It},{default:A(()=>[et(z(l(n)("el.colorpicker.clear")),1)]),_:1},8,["class"]),T(l(ot),{plain:"",size:"small",class:k(l(s).be("dropdown","btn")),onClick:Bt},{default:A(()=>[et(z(l(n)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[l(Pa),Ut]])]),default:A(()=>[S("div",Ve({id:l(v),ref_key:"triggerRef",ref:c},$.$attrs,{class:l(re),role:"button","aria-label":l(se),"aria-labelledby":l(le),"aria-description":l(n)("el.colorpicker.description",{color:$.modelValue||""}),"aria-disabled":l(f),tabindex:l(f)?-1:$.tabindex,onKeydown:Ht,onFocus:l(C),onBlur:l(d)}),[l(f)?(b(),w("div",{key:0,class:k(l(s).be("picker","mask"))},null,2)):M("v-if",!0),S("div",{class:k(l(s).be("picker","trigger")),onClick:Ot},[S("span",{class:k([l(s).be("picker","color"),l(s).is("alpha",$.showAlpha)])},[S("span",{class:k(l(s).be("picker","color-inner")),style:U({backgroundColor:l(Fe)})},[ve(T(l(q),{class:k([l(s).be("picker","icon"),l(s).is("icon-arrow-down")])},{default:A(()=>[T(l(Zt))]),_:1},8,["class"]),[[Ae,$.modelValue||R.value]]),ve(T(l(q),{class:k([l(s).be("picker","empty"),l(s).is("icon-close")])},{default:A(()=>[T(l(Be))]),_:1},8,["class"]),[[Ae,!$.modelValue&&!R.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var to=W(eo,[["__file","color-picker.vue"]]);const ao=Ie(to),oo=x({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:F(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:F([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:F(Function),default:t=>`${t}%`}}),no=D({name:"ElProgress"}),so=D({...no,props:oo,setup(t){const e=t,o={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},a=K("progress"),n=L(()=>{const d={width:`${e.percentage}%`,animationDuration:`${e.duration}s`},P=C(e.percentage);return P.includes("gradient")?d.background=P:d.backgroundColor=P,d}),s=L(()=>(e.strokeWidth/e.width*100).toFixed(1)),r=L(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(s.value)/2}`,10):0),u=L(()=>{const d=r.value,P=e.type==="dashboard";return`
          M 50 50
          m 0 ${P?"":"-"}${d}
          a ${d} ${d} 0 1 1 0 ${P?"-":""}${d*2}
          a ${d} ${d} 0 1 1 0 ${P?"":"-"}${d*2}
          `}),f=L(()=>2*Math.PI*r.value),v=L(()=>e.type==="dashboard"?.75:1),_=L(()=>`${-1*f.value*(1-v.value)/2}px`),h=L(()=>({strokeDasharray:`${f.value*v.value}px, ${f.value}px`,strokeDashoffset:_.value})),g=L(()=>({strokeDasharray:`${f.value*v.value*(e.percentage/100)}px, ${f.value}px`,strokeDashoffset:_.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),i=L(()=>{let d;return e.color?d=C(e.percentage):d=o[e.status]||o.default,d}),p=L(()=>e.status==="warning"?ea:e.type==="line"?e.status==="success"?yt:ta:e.status==="success"?kt:Be),c=L(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),m=L(()=>e.format(e.percentage));function y(d){const P=100/d.length;return d.map((O,R)=>ee(O)?{color:O,percentage:(R+1)*P}:O).sort((O,R)=>O.percentage-R.percentage)}const C=d=>{var P;const{color:E}=e;if(Lt(E))return E(d);if(ee(E))return E;{const O=y(E);for(const R of O)if(R.percentage>d)return R.color;return(P=O[O.length-1])==null?void 0:P.color}};return(d,P)=>(b(),w("div",{class:k([l(a).b(),l(a).m(d.type),l(a).is(d.status),{[l(a).m("without-text")]:!d.showText,[l(a).m("text-inside")]:d.textInside}]),role:"progressbar","aria-valuenow":d.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[d.type==="line"?(b(),w("div",{key:0,class:k(l(a).b("bar"))},[S("div",{class:k(l(a).be("bar","outer")),style:U({height:`${d.strokeWidth}px`})},[S("div",{class:k([l(a).be("bar","inner"),{[l(a).bem("bar","inner","indeterminate")]:d.indeterminate},{[l(a).bem("bar","inner","striped")]:d.striped},{[l(a).bem("bar","inner","striped-flow")]:d.stripedFlow}]),style:U(l(n))},[(d.showText||d.$slots.default)&&d.textInside?(b(),w("div",{key:0,class:k(l(a).be("bar","innerText"))},[I(d.$slots,"default",{percentage:d.percentage},()=>[S("span",null,z(l(m)),1)])],2)):M("v-if",!0)],6)],6)],2)):(b(),w("div",{key:1,class:k(l(a).b("circle")),style:U({height:`${d.width}px`,width:`${d.width}px`})},[(b(),w("svg",{viewBox:"0 0 100 100"},[S("path",{class:k(l(a).be("circle","track")),d:l(u),stroke:`var(${l(a).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":d.strokeLinecap,"stroke-width":l(s),fill:"none",style:U(l(h))},null,14,["d","stroke","stroke-linecap","stroke-width"]),S("path",{class:k(l(a).be("circle","path")),d:l(u),stroke:l(i),fill:"none",opacity:d.percentage?1:0,"stroke-linecap":d.strokeLinecap,"stroke-width":l(s),style:U(l(g))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(d.showText||d.$slots.default)&&!d.textInside?(b(),w("div",{key:2,class:k(l(a).e("text")),style:U({fontSize:`${l(c)}px`})},[I(d.$slots,"default",{percentage:d.percentage},()=>[d.status?(b(),V(l(q),{key:1},{default:A(()=>[(b(),V(Ft(l(p))))]),_:1})):(b(),w("span",{key:0},z(l(m)),1))])],6)):M("v-if",!0)],10,["aria-valuenow"]))}});var lo=W(so,[["__file","progress.vue"]]);const ro=Ie(lo),Nt=Symbol("uploadContextKey"),io="ElUpload";class co extends Error{constructor(e,o,a,n){super(e),this.name="UploadAjaxError",this.status=o,this.method=a,this.url=n}}function ct(t,e,o){let a;return o.response?a=`${o.response.error||o.response}`:o.responseText?a=`${o.responseText}`:a=`fail to ${e.method} ${t} ${o.status}`,new co(a,o.status,e.method,t)}function uo(t){const e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const fo=t=>{typeof XMLHttpRequest>"u"&&Ue(io,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,o=t.action;e.upload&&e.upload.addEventListener("progress",s=>{const r=s;r.percent=s.total>0?s.loaded/s.total*100:0,t.onProgress(r)});const a=new FormData;if(t.data)for(const[s,r]of Object.entries(t.data))Tt(r)&&r.length?a.append(s,...r):a.append(s,r);a.append(t.filename,t.file,t.file.name),e.addEventListener("error",()=>{t.onError(ct(o,t,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return t.onError(ct(o,t,e));t.onSuccess(uo(e))}),e.open(t.method,o,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const n=t.headers||{};if(n instanceof Headers)n.forEach((s,r)=>e.setRequestHeader(r,s));else for(const[s,r]of Object.entries(n))he(r)||e.setRequestHeader(s,String(r));return e.send(a),e},Dt=["text","picture","picture-card"];let po=1;const Re=()=>Date.now()+po++,Vt=x({action:{type:String,default:"#"},headers:{type:F(Object)},method:{type:String,default:"post"},data:{type:F([Object,Function,Promise]),default:()=>De({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:F(Array),default:()=>De([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Dt,default:"text"},httpRequest:{type:F(Function),default:fo},disabled:Boolean,limit:Number}),ho=x({...Vt,beforeUpload:{type:F(Function),default:B},beforeRemove:{type:F(Function)},onRemove:{type:F(Function),default:B},onChange:{type:F(Function),default:B},onPreview:{type:F(Function),default:B},onSuccess:{type:F(Function),default:B},onProgress:{type:F(Function),default:B},onError:{type:F(Function),default:B},onExceed:{type:F(Function),default:B},crossorigin:{type:F(String)}}),vo=x({files:{type:F(Array),default:()=>De([])},disabled:{type:Boolean,default:!1},handlePreview:{type:F(Function),default:B},listType:{type:String,values:Dt,default:"text"},crossorigin:{type:F(String)}}),go={remove:t=>!!t},mo=D({name:"ElUploadList"}),bo=D({...mo,props:vo,emits:go,setup(t,{emit:e}){const o=t,{t:a}=Oe(),n=K("upload"),s=K("icon"),r=K("list"),u=ye(),f=N(!1),v=L(()=>[n.b("list"),n.bm("list",o.listType),n.is("disabled",o.disabled)]),_=h=>{e("remove",h)};return(h,g)=>(b(),V(na,{tag:"ul",class:k(l(v)),name:l(r).b()},{default:A(()=>[(b(!0),w(He,null,je(h.files,(i,p)=>(b(),w("li",{key:i.uid||i.name,class:k([l(n).be("list","item"),l(n).is(i.status),{focusing:f.value}]),tabindex:"0",onKeydown:Ee(c=>!l(u)&&_(i),["delete"]),onFocus:c=>f.value=!0,onBlur:c=>f.value=!1,onClick:c=>f.value=!1},[I(h.$slots,"default",{file:i,index:p},()=>[h.listType==="picture"||i.status!=="uploading"&&h.listType==="picture-card"?(b(),w("img",{key:0,class:k(l(n).be("list","item-thumbnail")),src:i.url,crossorigin:h.crossorigin,alt:""},null,10,["src","crossorigin"])):M("v-if",!0),i.status==="uploading"||h.listType!=="picture-card"?(b(),w("div",{key:1,class:k(l(n).be("list","item-info"))},[S("a",{class:k(l(n).be("list","item-name")),onClick:Q(c=>h.handlePreview(i),["prevent"])},[T(l(q),{class:k(l(s).m("document"))},{default:A(()=>[T(l(aa))]),_:1},8,["class"]),S("span",{class:k(l(n).be("list","item-file-name")),title:i.name},z(i.name),11,["title"])],10,["onClick"]),i.status==="uploading"?(b(),V(l(ro),{key:0,type:h.listType==="picture-card"?"circle":"line","stroke-width":h.listType==="picture-card"?6:2,percentage:Number(i.percentage),style:U(h.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):M("v-if",!0)],2)):M("v-if",!0),S("label",{class:k(l(n).be("list","item-status-label"))},[h.listType==="text"?(b(),V(l(q),{key:0,class:k([l(s).m("upload-success"),l(s).m("circle-check")])},{default:A(()=>[T(l(yt))]),_:1},8,["class"])):["picture-card","picture"].includes(h.listType)?(b(),V(l(q),{key:1,class:k([l(s).m("upload-success"),l(s).m("check")])},{default:A(()=>[T(l(kt))]),_:1},8,["class"])):M("v-if",!0)],2),l(u)?M("v-if",!0):(b(),V(l(q),{key:2,class:k(l(s).m("close")),onClick:c=>_(i)},{default:A(()=>[T(l(Be))]),_:2},1032,["class","onClick"])),M(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),M(" This is a bug which needs to be fixed "),M(" TODO: Fix the incorrect navigation interaction "),l(u)?M("v-if",!0):(b(),w("i",{key:3,class:k(l(s).m("close-tip"))},z(l(a)("el.upload.deleteTip")),3)),h.listType==="picture-card"?(b(),w("span",{key:4,class:k(l(n).be("list","item-actions"))},[S("span",{class:k(l(n).be("list","item-preview")),onClick:c=>h.handlePreview(i)},[T(l(q),{class:k(l(s).m("zoom-in"))},{default:A(()=>[T(l(oa))]),_:1},8,["class"])],10,["onClick"]),l(u)?M("v-if",!0):(b(),w("span",{key:0,class:k(l(n).be("list","item-delete")),onClick:c=>_(i)},[T(l(q),{class:k(l(s).m("delete"))},{default:A(()=>[T(l(_t))]),_:1},8,["class"])],10,["onClick"]))],2)):M("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),I(h.$slots,"append")]),_:3},8,["class","name"]))}});var ut=W(bo,[["__file","upload-list.vue"]]);const yo=x({disabled:{type:Boolean,default:!1}}),ko={file:t=>Tt(t)},Rt="ElUploadDrag",_o=D({name:Rt}),$o=D({..._o,props:yo,emits:ko,setup(t,{emit:e}){St(Nt)||Ue(Rt,"usage: <el-upload><el-upload-dragger /></el-upload>");const a=K("upload"),n=N(!1),s=ye(),r=f=>{if(s.value)return;n.value=!1,f.stopPropagation();const v=Array.from(f.dataTransfer.files);e("file",v)},u=()=>{s.value||(n.value=!0)};return(f,v)=>(b(),w("div",{class:k([l(a).b("dragger"),l(a).is("dragover",n.value)]),onDrop:Q(r,["prevent"]),onDragover:Q(u,["prevent"]),onDragleave:Q(_=>n.value=!1,["prevent"])},[I(f.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var Co=W($o,[["__file","upload-dragger.vue"]]);const wo=x({...Vt,beforeUpload:{type:F(Function),default:B},onRemove:{type:F(Function),default:B},onStart:{type:F(Function),default:B},onSuccess:{type:F(Function),default:B},onProgress:{type:F(Function),default:B},onError:{type:F(Function),default:B},onExceed:{type:F(Function),default:B}}),So=D({name:"ElUploadContent",inheritAttrs:!1}),Eo=D({...So,props:wo,setup(t,{expose:e}){const o=t,a=K("upload"),n=ye(),s=me({}),r=me(),u=c=>{if(c.length===0)return;const{autoUpload:m,limit:y,fileList:C,multiple:d,onStart:P,onExceed:E}=o;if(y&&C.length+c.length>y){E(c,C);return}d||(c=c.slice(0,1));for(const O of c){const R=O;R.uid=Re(),P(R),m&&f(R)}},f=async c=>{if(r.value.value="",!o.beforeUpload)return _(c);let m,y={};try{const d=o.data,P=o.beforeUpload(c);y=tt(o.data)?nt(o.data):o.data,m=await P,tt(o.data)&&La(d,y)&&(y=nt(o.data))}catch{m=!1}if(m===!1){o.onRemove(c);return}let C=c;m instanceof Blob&&(m instanceof File?C=m:C=new File([m],c.name,{type:c.type})),_(Object.assign(C,{uid:c.uid}),y)},v=async(c,m)=>Lt(c)?c(m):c,_=async(c,m)=>{const{headers:y,data:C,method:d,withCredentials:P,name:E,action:O,onProgress:R,onSuccess:J,onError:Fe,httpRequest:ne}=o;try{m=await v(m??C,c)}catch{o.onRemove(c);return}const{uid:se}=c,le={headers:y||{},withCredentials:P,file:c,data:m,method:d,filename:E,action:O,onProgress:X=>{R(X,c)},onSuccess:X=>{J(X,c),delete s.value[se]},onError:X=>{Fe(X,c),delete s.value[se]}},re=ne(le);s.value[se]=re,re instanceof Promise&&re.then(le.onSuccess,le.onError)},h=c=>{const m=c.target.files;m&&u(Array.from(m))},g=()=>{n.value||(r.value.value="",r.value.click())},i=()=>{g()};return e({abort:c=>{sa(s.value).filter(c?([y])=>String(c.uid)===y:()=>!0).forEach(([y,C])=>{C instanceof XMLHttpRequest&&C.abort(),delete s.value[y]})},upload:f}),(c,m)=>(b(),w("div",{class:k([l(a).b(),l(a).m(c.listType),l(a).is("drag",c.drag),l(a).is("disabled",l(n))]),tabindex:l(n)?"-1":"0",onClick:g,onKeydown:Ee(Q(i,["self"]),["enter","space"])},[c.drag?(b(),V(Co,{key:0,disabled:l(n),onFile:u},{default:A(()=>[I(c.$slots,"default")]),_:3},8,["disabled"])):I(c.$slots,"default",{key:1}),S("input",{ref_key:"inputRef",ref:r,class:k(l(a).e("input")),name:c.name,disabled:l(n),multiple:c.multiple,accept:c.accept,type:"file",onChange:h,onClick:Q(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var dt=W(Eo,[["__file","upload-content.vue"]]);const ft="ElUpload",pt=t=>{var e;(e=t.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(t.url)},Po=(t,e)=>{const o=la(t,"fileList",void 0,{passive:!0}),a=i=>o.value.find(p=>p.uid===i.uid);function n(i){var p;(p=e.value)==null||p.abort(i)}function s(i=["ready","uploading","success","fail"]){o.value=o.value.filter(p=>!i.includes(p.status))}function r(i){o.value=o.value.filter(p=>p!==i)}const u=(i,p)=>{const c=a(p);c&&(console.error(i),c.status="fail",r(c),t.onError(i,c,o.value),t.onChange(c,o.value))},f=(i,p)=>{const c=a(p);c&&(t.onProgress(i,c,o.value),c.status="uploading",c.percentage=Math.round(i.percent))},v=(i,p)=>{const c=a(p);c&&(c.status="success",c.response=i,t.onSuccess(i,c,o.value),t.onChange(c,o.value))},_=i=>{he(i.uid)&&(i.uid=Re());const p={name:i.name,percentage:0,status:"ready",size:i.size,raw:i,uid:i.uid};if(t.listType==="picture-card"||t.listType==="picture")try{p.url=URL.createObjectURL(i)}catch(c){Ne(ft,c.message),t.onError(c,p,o.value)}o.value=[...o.value,p],t.onChange(p,o.value)},h=async i=>{const p=i instanceof File?a(i):i;p||Ue(ft,"file to be removed not found");const c=m=>{n(m),r(m),t.onRemove(m,o.value),pt(m)};t.beforeRemove?await t.beforeRemove(p,o.value)!==!1&&c(p):c(p)};function g(){o.value.filter(({status:i})=>i==="ready").forEach(({raw:i})=>{var p;return i&&((p=e.value)==null?void 0:p.upload(i))})}return H(()=>t.listType,i=>{i!=="picture-card"&&i!=="picture"||(o.value=o.value.map(p=>{const{raw:c,url:m}=p;if(!m&&c)try{p.url=URL.createObjectURL(c)}catch(y){t.onError(y,p,o.value)}return p}))}),H(o,i=>{for(const p of i)p.uid||(p.uid=Re()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:o,abort:n,clearFiles:s,handleError:u,handleProgress:f,handleStart:_,handleSuccess:v,handleRemove:h,submit:g,revokeFileObjectURL:pt}},Lo=D({name:"ElUpload"}),Fo=D({...Lo,props:ho,setup(t,{expose:e}){const o=t,a=ye(),n=me(),{abort:s,submit:r,clearFiles:u,uploadFiles:f,handleStart:v,handleError:_,handleRemove:h,handleSuccess:g,handleProgress:i,revokeFileObjectURL:p}=Po(o,n),c=L(()=>o.listType==="picture-card"),m=L(()=>({...o,fileList:f.value,onStart:v,onProgress:i,onSuccess:g,onError:_,onRemove:h}));return ka(()=>{f.value.forEach(p)}),Pt(Nt,{accept:_a(o,"accept")}),e({abort:s,submit:r,clearFiles:u,handleStart:v,handleRemove:h}),(y,C)=>(b(),w("div",null,[l(c)&&y.showFileList?(b(),V(ut,{key:0,disabled:l(a),"list-type":y.listType,files:l(f),crossorigin:y.crossorigin,"handle-preview":y.onPreview,onRemove:l(h)},at({append:A(()=>[T(dt,Ve({ref_key:"uploadRef",ref:n},l(m)),{default:A(()=>[y.$slots.trigger?I(y.$slots,"trigger",{key:0}):M("v-if",!0),!y.$slots.trigger&&y.$slots.default?I(y.$slots,"default",{key:1}):M("v-if",!0)]),_:3},16)]),_:2},[y.$slots.file?{name:"default",fn:A(({file:d,index:P})=>[I(y.$slots,"file",{file:d,index:P})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):M("v-if",!0),!l(c)||l(c)&&!y.showFileList?(b(),V(dt,Ve({key:1,ref_key:"uploadRef",ref:n},l(m)),{default:A(()=>[y.$slots.trigger?I(y.$slots,"trigger",{key:0}):M("v-if",!0),!y.$slots.trigger&&y.$slots.default?I(y.$slots,"default",{key:1}):M("v-if",!0)]),_:3},16)):M("v-if",!0),y.$slots.trigger?I(y.$slots,"default",{key:2}):M("v-if",!0),I(y.$slots,"tip"),!l(c)&&y.showFileList?(b(),V(ut,{key:3,disabled:l(a),"list-type":y.listType,files:l(f),crossorigin:y.crossorigin,"handle-preview":y.onPreview,onRemove:l(h)},at({_:2},[y.$slots.file?{name:"default",fn:A(({file:d,index:P})=>[I(y.$slots,"file",{file:d,index:P})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):M("v-if",!0)]))}});var To=W(Fo,[["__file","upload.vue"]]);const Mo=Ie(To);function Ao(t){let e;const o=N(!1),a=Et({...t,originalPosition:"",originalOverflow:"",visible:!1});function n(g){a.text=g}function s(){const g=a.parent,i=h.ns;if(!g.vLoadingAddClassList){let p=g.getAttribute("loading-number");p=Number.parseInt(p)-1,p?g.setAttribute("loading-number",p.toString()):(Pe(g,i.bm("parent","relative")),g.removeAttribute("loading-number")),Pe(g,i.bm("parent","hidden"))}r(),_.unmount()}function r(){var g,i;(i=(g=h.$el)==null?void 0:g.parentNode)==null||i.removeChild(h.$el)}function u(){var g;t.beforeClose&&!t.beforeClose()||(o.value=!0,clearTimeout(e),e=setTimeout(f,400),a.visible=!1,(g=t.closed)==null||g.call(t))}function f(){if(!o.value)return;const g=a.parent;o.value=!1,g.vLoadingAddClassList=void 0,s()}const v=D({name:"ElLoading",setup(g,{expose:i}){const{ns:p,zIndex:c}=ra("loading");return i({ns:p,zIndex:c}),()=>{const m=a.spinner||a.svg,y=de("svg",{class:"circular",viewBox:a.svgViewBox?a.svgViewBox:"0 0 50 50",...m?{innerHTML:m}:{}},[de("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),C=a.text?de("p",{class:p.b("text")},[a.text]):void 0;return de(ia,{name:p.b("fade"),onAfterLeave:f},{default:A(()=>[ve(T("div",{style:{backgroundColor:a.background||""},class:[p.b("mask"),a.customClass,a.fullscreen?"is-fullscreen":""]},[de("div",{class:p.b("spinner")},[y,C])]),[[Ae,a.visible]])])})}}}),_=$t(v),h=_.mount(document.createElement("div"));return{...$a(a),setText:n,removeElLoadingChild:r,close:u,handleAfterLeave:f,vm:h,get $el(){return h.$el}}}let $e;const No=function(t={}){if(!mt)return;const e=Do(t);if(e.fullscreen&&$e)return $e;const o=Ao({...e,closed:()=>{var n;(n=e.closed)==null||n.call(e),e.fullscreen&&($e=void 0)}});Vo(e,e.parent,o),ht(e,e.parent,o),e.parent.vLoadingAddClassList=()=>ht(e,e.parent,o);let a=e.parent.getAttribute("loading-number");return a?a=`${Number.parseInt(a)+1}`:a="1",e.parent.setAttribute("loading-number",a),e.parent.appendChild(o.$el),ae(()=>o.visible.value=e.visible),e.fullscreen&&($e=o),o},Do=t=>{var e,o,a,n;let s;return ee(t.target)?s=(e=document.querySelector(t.target))!=null?e:document.body:s=t.target||document.body,{parent:s===document.body||t.body?document.body:s,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:s===document.body&&((o=t.fullscreen)!=null?o:!0),lock:(a=t.lock)!=null?a:!1,customClass:t.customClass||"",visible:(n=t.visible)!=null?n:!0,beforeClose:t.beforeClose,closed:t.closed,target:s}},Vo=async(t,e,o)=>{const{nextZIndex:a}=o.vm.zIndex||o.vm._.exposed.zIndex,n={};if(t.fullscreen)o.originalPosition.value=ue(document.body,"position"),o.originalOverflow.value=ue(document.body,"overflow"),n.zIndex=a();else if(t.parent===document.body){o.originalPosition.value=ue(document.body,"position"),await ae();for(const s of["top","left"]){const r=s==="top"?"scrollTop":"scrollLeft";n[s]=`${t.target.getBoundingClientRect()[s]+document.body[r]+document.documentElement[r]-Number.parseInt(ue(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])n[s]=`${t.target.getBoundingClientRect()[s]}px`}else o.originalPosition.value=ue(e,"position");for(const[s,r]of Object.entries(n))o.$el.style[s]=r},ht=(t,e,o)=>{const a=o.vm.ns||o.vm._.exposed.ns;["absolute","fixed","sticky"].includes(o.originalPosition.value)?Pe(e,a.bm("parent","relative")):Ze(e,a.bm("parent","relative")),t.fullscreen&&t.lock?Ze(e,a.bm("parent","hidden")):Pe(e,a.bm("parent","hidden"))},Se=Symbol("ElLoading"),vt=(t,e)=>{var o,a,n,s;const r=e.instance,u=g=>Mt(e.value)?e.value[g]:void 0,f=g=>{const i=ee(g)&&(r==null?void 0:r[g])||g;return i&&N(i)},v=g=>f(u(g)||t.getAttribute(`element-loading-${wa(g)}`)),_=(o=u("fullscreen"))!=null?o:e.modifiers.fullscreen,h={text:v("text"),svg:v("svg"),svgViewBox:v("svgViewBox"),spinner:v("spinner"),background:v("background"),customClass:v("customClass"),fullscreen:_,target:(a=u("target"))!=null?a:_?void 0:t,body:(n=u("body"))!=null?n:e.modifiers.body,lock:(s=u("lock"))!=null?s:e.modifiers.lock};t[Se]={options:h,instance:No(h)}},Ro=(t,e)=>{for(const o of Object.keys(e))Ca(e[o])&&(e[o].value=t[o])},Oo={mounted(t,e){e.value&&vt(t,e)},updated(t,e){const o=t[Se];e.oldValue!==e.value&&(e.value&&!e.oldValue?vt(t,e):e.value&&e.oldValue?Mt(e.value)&&Ro(e.value,o.options):o==null||o.instance.close())},unmounted(t){var e;(e=t[Se])==null||e.instance.close(),t[Se]=null}};function Bo(t,e){const o=new XMLHttpRequest;o.open("GET",t),o.send(null),o.onreadystatechange=function(){o.readyState===4&&o.status===200&&e(o.responseText)}}const Io={class:"ep-slider__wrapper"},Uo={class:"ep-slider__label"},Ho=D({__name:"TextField",props:{config:{}},setup(t){const e=t,o=te();function a(n){e.config.handler&&typeof e.config.handler=="function"&&e.config.handler(n),o.saveDescription({fields:[{key:e.config.key,value:e.config.value}]})}return(n,s)=>{const r=bt;return b(),w("div",Io,[S("span",Uo,z(n.config.label),1),T(r,{clearable:"",onChange:a,modelValue:n.config.value,"onUpdate:modelValue":s[0]||(s[0]=u=>n.config.value=u),type:n.config.inputType||"textarea"},null,8,["modelValue","type"])])}}}),jo={class:"ep-color-picker__wrapper display-flex-center flex-between"},Ko={class:"ep-color-picker__label"},qo=D({__name:"ColorField",props:{config:{}},setup(t){const e=te(),o=t;function a(n){e.saveDescription({fields:[{key:o.config.key,value:n||"#f6f6f6"}]})}return(n,s)=>{const r=ao;return b(),w("div",jo,[S("span",Ko,z(n.config.label),1),T(r,{modelValue:n.config.value,"onUpdate:modelValue":s[0]||(s[0]=u=>n.config.value=u),"show-alpha":"",onChange:a},null,8,["modelValue"])])}}}),zo={class:"ep-slider__wrapper"},Wo={class:"ep-slider__label"},Xo=D({__name:"SliderField",props:{config:{}},setup(t){const e=t,o=te();function a(n){e.config.handler&&typeof e.config.handler=="function"&&e.config.handler(n),o.saveDescription({fields:[{key:e.config.key,value:e.config.value}]})}return(n,s)=>{const r=ha;return b(),w("div",zo,[S("span",Wo,z(n.config.label),1),T(r,{min:n.config.min,max:n.config.max,onChange:a,step:n.config.step,marks:n.config.marks,modelValue:n.config.value,"onUpdate:modelValue":s[0]||(s[0]=u=>n.config.value=u),"show-input":n.config.showInput},null,8,["min","max","step","marks","modelValue","show-input"])])}}}),Yo=D({__name:"SwitchField",props:{config:{}},setup(t){const e=t,o=te();function a(n){e.config.handler&&typeof e.config.handler=="function"&&e.config.handler(n),o.saveDescription({fields:[{key:e.config.key,value:e.config.value}]})}return(n,s)=>{const r=Ct;return b(),V(r,{modelValue:n.config.value,"onUpdate:modelValue":s[0]||(s[0]=u=>n.config.value=u),"active-text":n.config.label,onChange:a},null,8,["modelValue","active-text"])}}}),xo={class:"ep-upload__wrapper"},Jo={class:"ep-upload__label"},Go={key:0,class:"upload-image-wrapper"},Zo=["src"],Qo=D({__name:"UploadField",props:{config:{}},setup(t){const e=N(!1),o=te(),a=t;function n(){a.config.value="",o.saveDescription({fields:[{key:a.config.key,value:a.config.value}]})}function s(r){if(!r.type.toLowerCase().startsWith("image/"))return console.log("所选文件不是图片格式");e.value=!0;const u=new FileReader;return u.readAsDataURL(r),u.onload=f=>{e.value=!1;const v=f.target.result;if(!v)return console.log("背景图片为空");a.config.handler&&typeof a.config.handler=="function"&&a.config.handler(v),a.config.value=v,o.saveDescription({fields:[{key:a.config.key,value:a.config.value}]}),console.log("读取背景图片成功")},u.onerror=f=>{e.value=!1,console.error(`读取背景图片失败: ${f}`)},!1}return(r,u)=>{const f=q,v=Mo,_=Oo;return b(),w("div",xo,[S("span",Jo,z(r.config.label),1),ve((b(),V(v,{"on-error":()=>{},"on-success":()=>{},"show-file-list":!1,"list-type":"picture-card",action:"#import-background-image","before-upload":s},{default:A(()=>[r.config.value?(b(),w("div",Go,[S("img",{src:r.config.value,alt:""},null,8,Zo),T(f,{class:"el-upload-list__item-delete",onClick:Q(n,["stop"])},{default:A(()=>[T(l(_t))]),_:1})])):(b(),V(f,{key:1},{default:A(()=>[T(l(ca))]),_:1}))]),_:1})),[[_,e.value]])])}}});var en={VITE_EMPTY_POPUP:"true",VITE_POPUP_ID:""};const gt={TextField:fe(Ho),ColorField:fe(qo),SliderField:fe(Xo),SwitchField:fe(Yo),UploadField:fe(Qo)},{VITE_POPUP_ID:tn,VITE_EMPTY_POPUP:an}=en,te=fa("popup-config",{state:()=>({empty:an==="true",description:{...wt,configId:tn}}),actions:{saveDescription(t){const e=this.description.configId,o={[e]:{...this.description,...t,fields:[]}};(t.fields||[]).forEach(n=>{o[e][n.key]=n.value}),va(JSON.parse(JSON.stringify(o))).then(()=>console.log("保存成功: ",o))},enableConfig(){this.empty=!1},mergeConfig(t){this.description.configId=t.id,Fa(this.description,t.description),(this.description.fields||[]).forEach(e=>{this.description.hasOwnProperty(e.key)&&(e.value=this.description[e.key]),gt.hasOwnProperty(e.type)&&(e.type=gt[e.type])})}}}),on={class:"popup-page-wrapper"},nn=D({__name:"PopupConfig",setup(t){const e=te();N({...wt});function o(r,u=""){ga(u).then(f=>{e.mergeConfig({description:{...f[u],configId:u,configLabel:r}})})}function a(r){e.saveDescription({enable:r})}function n(r){e.saveDescription({injectCSS:r})}function s(r){e.saveDescription({injectScript:r})}return ke(()=>{o(e.description.configLabel,e.description.configId)}),(r,u)=>{const f=Ct,v=ua;return b(),w("div",on,[T(v,{class:"config-switch-card"},{default:A(()=>[T(f,{onChange:a,modelValue:l(e).description.enable,"onUpdate:modelValue":u[0]||(u[0]=_=>l(e).description.enable=_),"active-text":l(e).description.configLabel},null,8,["modelValue","active-text"]),l(e).description.enable?(b(),V(f,{key:0,"active-text":"注入预设样式",onChange:n,modelValue:l(e).description.injectCSS,"onUpdate:modelValue":u[1]||(u[1]=_=>l(e).description.injectCSS=_)},null,8,["modelValue"])):M("",!0),l(e).description.enable?(b(),V(f,{key:1,"active-text":"注入预设脚本",onChange:s,modelValue:l(e).description.injectScript,"onUpdate:modelValue":u[2]||(u[2]=_=>l(e).description.injectScript=_)},null,8,["modelValue"])):M("",!0)]),_:1}),l(e).description.enable&&l(e).description.fields.length?(b(),V(v,{key:0,class:"options-wrapper"},{default:A(()=>[(b(!0),w(He,null,je(l(e).description.fields,_=>(b(),V(Ft(_.type),{config:_,key:_.key},null,8,["config"]))),128))]),_:1})):M("",!0)])}}}),sn={key:0,class:"empty-content"},ln=D({__name:"App",setup(t){const e=te();return chrome.tabs&&chrome.tabs.query(ma).then(([o])=>{const a=ba.find(n=>n.expectUrl(o));a&&(e.enableConfig(),e.mergeConfig(a))}),Sa(()=>{Bo("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1",o=>{const a=JSON.parse(o).images;document.body.style.backgroundImage=a.map(n=>`url('http://cn.bing.com${n.url}')`).join(",")})}),(o,a)=>{const n=da;return b(),V(n,{namespace:"ep"},{default:A(()=>[l(e).empty?(b(),w("h3",sn,"当前页面无可配置项")):(b(),V(nn,{key:1}))]),_:1})}}});$t(ln).use(pa()).mount("#app");
